(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4446:function(e,t,l){Promise.resolve().then(l.bind(l,3229))},3229:function(e,t,l){"use strict";l.d(t,{default:function(){return h}});var s=l(7437),a=l(2265),r=l(6463);l(8060);var n=e=>{let{children:t}=e,l=(0,r.useRouter)();return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full bg-slate-100 max-[600px]:p-0 sm:p-4",dir:"rtl",children:[(0,s.jsx)("header",{className:"bg-neutral-100 text-white h-20 w-full rounded-lg shadow-xl max-[600px]:rounded-none max-[600px]:shadow-lg max-[600px]:h-20",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between items-center h-full px-4 ltr",children:[(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:"",alt:""})}),(0,s.jsxs)("div",{className:"flex space-x-4 space-x-reverse",children:[(0,s.jsx)("a",{href:"/dashboard",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 ml-2",children:"داشبورد"}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),l.push("/")},className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 ml-2",children:"خروج"})]})]})}),(0,s.jsx)("main",{className:"flex h-full p-4",children:(0,s.jsx)("div",{className:"h-full w-full",children:t})})]})},c=l(8472),o=e=>{let{onClose:t}=e,[l,r]=(0,a.useState)({id:null,name:"",description:"",font:"",background_color:"",text_color:"",border_radius:!1,telegram_link:"",phone_number:"",custom_block:"",custom_url:""}),[n,o]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");try{let t=await c.Z.get("http://45.149.77.102:8000/card/businesscards/",{headers:{Authorization:"Token ".concat(e)}});if(t.data.length>0){let e=t.data[0];r({id:e.id,name:e.name,description:e.description,font:e.font,background_color:e.background_color,text_color:e.text_color,border_radius:e.border_radius,telegram_link:e.telegram_link,phone_number:e.phone_number,custom_block:e.custom_block,custom_url:e.custom_url}),m(!0)}}catch(e){console.error("Error fetching business card:",e)}})()},[]);let u=e=>{let{name:t,value:l,type:s,checked:a}=e.target;r(e=>{let r={...e,[t]:"checkbox"===s?a:l};return console.log(r.custom_url),r})},h=e=>{let{name:t,files:l}=e.target;"background_image"===t?o(l[0]):"business_icon"===t&&d(l[0])},p=async e=>{e.preventDefault();let s=localStorage.getItem("token"),a=new FormData;Object.keys(l).forEach(e=>{a.append(e,l[e])}),n&&a.append("background_image",n),i&&a.append("business_icon",i);try{console.log(l);let e=x?"http://45.149.77.102:8000/card/businesscards/".concat(l.id,"/"):"http://45.149.77.102:8000/card/businesscards/",r=await c.Z[x?"patch":"post"](e,a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Token ".concat(s)}});console.log(r.data),t()}catch(e){console.error("There was an error creating/updating the business card!",e.response.data)}};return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-h-[80vh] overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-2xl mb-4 text-red-950",children:x?"ویرایش کارت ویزیت":"ایجاد کارت ویزیت"}),(0,s.jsxs)("form",{onSubmit:p,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"نام"}),(0,s.jsx)("input",{type:"text",name:"name",value:l.name,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-red-950"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"توضیحات"}),(0,s.jsx)("textarea",{name:"description",value:l.description,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-red-950"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:" text-sm font-medium text-red-950",children:"فونت"}),(0,s.jsx)("input",{type:"text",name:"font",value:l.font,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-red-950"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"رنگ پس‌زمینه"}),(0,s.jsx)("div",{className:"flex space-x-2",children:["#FFC300","#DAF7A6","#C70039"].map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",name:"background_color",value:e,checked:l.background_color===e,onChange:u,className:"form-radio"}),(0,s.jsx)("span",{className:"ml-2",style:{backgroundColor:e,width:"24px",height:"24px",display:"inline-block"}})]},e))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"رنگ متن"}),(0,s.jsx)("div",{className:"flex space-x-2",children:["#FFFFFF","#000000","#FF5733"].map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",name:"text_color",value:e,checked:l.text_color===e,onChange:u,className:"form-radio"}),(0,s.jsx)("span",{className:"ml-2",style:{backgroundColor:e,width:"24px",height:"24px",display:"inline-block"}})]},e))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"شعاع حاشیه"}),(0,s.jsx)("input",{type:"checkbox",name:"border_radius",checked:l.border_radius,onChange:u,className:"text-red-950"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"لینک تلگرام"}),(0,s.jsx)("input",{type:"text",name:"telegram_link",value:l.telegram_link,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-red-950"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"شماره تلفن"}),(0,s.jsx)("input",{type:"text",name:"phone_number",value:l.phone_number,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-red-950"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"بلاک سفارشی"}),(0,s.jsx)("textarea",{name:"custom_block",value:l.custom_block,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-red-950"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"URL سفارشی"}),(0,s.jsx)("input",{type:"text",name:"custom_url",value:l.custom_url,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-red-950"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"تصویر پس‌زمینه"}),(0,s.jsx)("input",{type:"file",name:"background_image",onChange:h,className:"w-full p-2 border border-gray-300 rounded text-red-950",accept:"image/*"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-red-950",children:"آیکون کسب و کار"}),(0,s.jsx)("input",{type:"file",name:"business_icon",onChange:h,className:"w-full p-2 border border-gray-300 rounded text-red-950",accept:"image/*"})]}),(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"mr-2 px-4 py-2 bg-gray-400 text-white rounded",children:"لغو"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded",children:"ذخیره"})]})]})]})})};let i=()=>null!==localStorage.getItem("token");var d=l(5734),x=l.n(d),m=e=>{let{onCardStatusChange:t}=e,[l,n]=(0,a.useState)(null),[o,d]=(0,a.useState)(!1),m=(0,r.useRouter)();(0,a.useEffect)(()=>{d(!0),i()?u():m.push("/login")},[m]);let u=async()=>{let e=localStorage.getItem("token");try{let l=await c.Z.get("http://45.149.77.102:8000/card/businesscards/",{headers:{Authorization:"Token ".concat(e)}});if(l.data.length>0){let e=l.data[0];n(l.data[0]),t(!0,e)}else t(!1)}catch(e){console.error("Error fetching business card:",e),t(!1)}};return o?(0,s.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:l?(0,s.jsxs)("section",{className:"w-full h-full flex flex-col justify-start items-center overflow-y-auto ".concat(x().cardContainer),style:{background:l.background_image?"url(".concat(l.background_image,")"):l.background_color,backgroundSize:"cover",backgroundPosition:"center",maxWidth:"500px"},children:[(0,s.jsxs)("div",{className:"container flex flex-col justify-start items-center relative",children:[l.business_icon?(0,s.jsx)("img",{className:x().img_logo_card,src:l.business_icon,alt:"Business Icon"}):(0,s.jsx)("img",{className:x().img_logo_card,src:"/image/mohsen's logo.png",alt:"Logo"}),(0,s.jsx)("p",{className:"text-white mt-3 font-bold ".concat(x().title_card," "),style:{color:l.text_color},children:l.name||"Default Font"}),(0,s.jsx)("p",{className:"text-white mt-1",style:{color:l.text_color},children:l.description||"برنامه نویس و طراح سایت"})]}),(0,s.jsx)("div",{className:"mt-10 w-full flex flex-row items-center text-white",children:(0,s.jsxs)("div",{className:"w-full flex-col flex items-center justify-center overflow-hidden",style:{padding:"0px 16px"},children:[(0,s.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-4",style:{fontSize:"16px",marginBottom:"22px"},children:[(0,s.jsx)("p",{className:x().title_buttons,style:{color:l.text_color},children:"ارتباط سریع و آسان"}),(0,s.jsx)("div",{className:"flex w-full flex-row",children:(0,s.jsxs)("button",{onClick:()=>window.location.href=l.telegram_link,className:"flex relative justify-center items-center w-full no-underline cursor-pointer text-center",style:{minHeight:"48px",background:"#8b2a3d",borderRadius:"10px",gap:"6px"},children:[(0,s.jsx)("p",{className:x().icon_button,style:{color:l.text_color,fontSize:"20px",color:"#363636",width:"24px",height:"24px",position:"absolute",left:"20px"},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",children:(0,s.jsx)("path",{d:"M248 8C111 8 0 119 0 256S111 504 248 504 496 393 496 256 385 8 248 8zM363 176.7c-3.7 39.2-19.9 134.4-28.1 178.3-3.5 18.6-10.3 24.8-16.9 25.4-14.4 1.3-25.3-9.5-39.3-18.7-21.8-14.3-34.2-23.2-55.3-37.2-24.5-16.1-8.6-25 5.3-39.5 3.7-3.8 67.1-61.5 68.3-66.7 .2-.7 .3-3.1-1.2-4.4s-3.6-.8-5.1-.5q-3.3 .7-104.6 69.1-14.8 10.2-26.9 9.9c-8.9-.2-25.9-5-38.6-9.1-15.5-5-27.9-7.7-26.8-16.3q.8-6.7 18.5-13.7 108.4-47.2 144.6-62.3c68.9-28.6 83.2-33.6 92.5-33.8 2.1 0 6.6 .5 9.6 2.9a10.5 10.5 0 0 1 3.5 6.7A43.8 43.8 0 0 1 363 176.7z"})})}),(0,s.jsx)("span",{className:"text-center ".concat(x().text_button),style:{color:l.text_color},children:"تلگرام"})]})}),(0,s.jsx)("div",{className:"flex w-full flex-row",children:(0,s.jsxs)("button",{onClick:()=>window.location.href=l.phone_number,className:"flex relative justify-center items-center w-full no-underline cursor-pointer text-center",style:{minHeight:"48px",background:"#8b2a3d",borderRadius:"10px",gap:"6px"},children:[(0,s.jsx)("p",{className:"".concat(x().icon_button," absolute"),style:{fontSize:"20px",color:"#363636",width:"24px",height:"24px",left:"20px",top:"9px"},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:(0,s.jsx)("path",{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"})})}),(0,s.jsx)("span",{className:"text-center ".concat(x().text_button),style:{color:l.text_color},children:"واتس‌اپ"})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center w-full gap-y-4",style:{fontSize:"16px",marginBottom:"22px"},children:[(0,s.jsx)("p",{className:x().title_buttons,style:{color:l.text_color},children:"لینک ها"}),(0,s.jsx)("div",{className:"flex w-full flex-row",children:(0,s.jsxs)("button",{onClick:()=>window.location.href=l.custom_url,className:"flex relative justify-center items-center w-full no-underline cursor-pointer text-center",style:{minHeight:"48px",background:"#8b2a3d",borderRadius:"10px",padding:"0px 10px",gap:"6px"},children:[(0,s.jsx)("p",{className:"".concat(x().icon_button," absolute"),style:{fontSize:"20px",color:"#363636",width:"24px",height:"24px",left:"20px"},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,s.jsx)("path",{d:"M352 256c0 22.1-2.2 43.5-6.1 64H166.1c-3.9-20.5-6.1-41.9-6.1-64s2.2-43.5 6.1-64H345.9c3.9 20.5 6.1 41.9 6.1 64zm26.4-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H378.4c3.6-20.5 5.6-41.9 5.6-64s-2-43.5-5.6-64zm115-32h-122c-17-65.6-48.3-120-74-156.7c89.2 14.5 163 75.2 196 156.7zm-155.1 0H173.7c11.4-40.2 28.4-75.9 45.8-105.4c13-21.9 25.9-40 36.5-53.5c10.5 13.5 23.5 31.6 36.5 53.5c17.4 29.4 34.5 65.1 45.8 105.4zm-197.7 0H18.6c33-81.5 106.7-142.2 196-156.7c-25.7 36.7-57 91-74 156.7zM8.1 192H133.6c-3.6 20.5-5.6 41.9-5.6 64s2 43.5 5.6 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM173.7 352H338.3c-11.4 40.2-28.4 75.9-45.8 105.4c-13 21.9-25.9 40-36.5 53.5c-10.5-13.5-23.5-31.6-36.5-53.5c-17.4-29.4-34.5-65.1-45.8-105.4zm-33.2 0c17 65.6 48.3 120 74 156.7c-89.2-14.5-163-75.2-196-156.7h122zm352.8 0c-33 81.5-106.7 142.2-196 156.7c25.7-36.7 57-91 74-156.7h122z"})})}),(0,s.jsx)("p",{className:"text-center ".concat(x().text_button),style:{color:l.text_color},children:"وب سایت"})]})})]})]})})]}):(0,s.jsx)("p",{children:"No business card found."})}):null},u=l(7171),h=()=>{let[e,t]=(0,a.useState)(!1),[l,r]=(0,a.useState)(!1),[c,i]=(0,a.useState)(""),d=()=>{t(!0)};return(0,s.jsxs)(n,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-center h-full w-full md:flex-row flex-col",children:[(0,s.jsx)(m,{onCardStatusChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(e),t&&i(t.custom_url)}}),!l&&(0,s.jsx)("button",{onClick:()=>d(),className:"min-w-[250px] min-h-[250px] bg-white border border-gray-300 text-blue-500 rounded-lg flex items-center justify-center hover:bg-gray-100 transition-transform transform hover:scale-110",children:(0,s.jsx)("span",{className:"text-6xl",children:"+"})}),l&&(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},children:[(0,s.jsx)("button",{onClick:()=>d(),className:"min-w-[70px] min-h-[70px] bg-white border border-gray-300 text-blue-500 rounded-lg flex items-center justify-center hover:bg-gray-100 transition-transform transform hover:scale-110",children:(0,s.jsx)("span",{className:"text-xl",children:"ویرایش"})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(u.ZP,{value:"https://linkcarrd.ir/".concat(c)})})]})]}),e&&(0,s.jsx)(o,{onClose:()=>{t(!1)}})]})}},5734:function(e){e.exports={img_top_card:"CardLayout_img_top_card__KWL0u",img_logo_card:"CardLayout_img_logo_card__Jl3vo",title_card:"CardLayout_title_card__22EMH"}},8060:function(e){e.exports={dropDown_dashboard:"Layout_dropDown_dashboard__A9BW5",dropdown:"Layout_dropdown__FwqTi"}}},function(e){e.O(0,[780,236,171,971,23,744],function(){return e(e.s=4446)}),_N_E=e.O()}]);