(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4446:function(e,l,t){Promise.resolve().then(t.bind(t,9726))},9726:function(e,l,t){"use strict";t.d(l,{default:function(){return m}});var s=t(7437),a=t(2265),n=t(6463);t(8060);var r=e=>{let{children:l}=e,t=(0,n.useRouter)();return(0,s.jsxs)("div",{className:"w-full h-screen flex flex-col bg-slate-100 max-[600px]:p-0",dir:"rtl",children:[(0,s.jsx)("header",{className:"w-full h-[80px] bg-white shadow-lg flex justify-center items-center",children:(0,s.jsxs)("div",{className:"container flex justify-between items-center",children:[(0,s.jsx)("img",{src:"/image/logoBlack.png",alt:"logo",className:"w-32"}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),t.push("/")},className:"w-20 h-10 px-2 py-1 flex justify-center items-center bg-blue-400 rounded-lg text-white",children:"خروج"})})]})}),(0,s.jsx)("main",{className:"flex h-full p-4 justify-center items-center",children:(0,s.jsx)("div",{className:"h-full w-full",children:l})})]})},o=t(8472),c=e=>{let{onClose:l}=e,[t,n]=(0,a.useState)({id:null,name:"",description:"",font:"",background_color:"",text_color:"",border_radius:!1,telegram_link:"",instagram:"",phone_number:"",phone_number_2:"",custom_block:"",custom_block_2:"",custom_url:"",button_color:"",website:"",whatsapp:""}),[r,c]=(0,a.useState)(null),[d,i]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");try{let l=await o.Z.get("http://45.149.77.102:8000/card/businesscards/",{headers:{Authorization:"Token ".concat(e)}});if(l.data.length>0){let e=l.data[0];n({id:e.id,name:e.name,description:e.description,font:e.font,background_color:e.background_color,text_color:e.text_color,border_radius:e.border_radius,telegram_link:e.telegram_link,instagram:e.instagram,phone_number:e.phone_number,phone_number_2:e.phone_number_2,custom_block:e.custom_block,custom_block_2:e.custom_block_2,custom_url:e.custom_url,button_color:e.button_color,website:e.website,whatsapp:e.whatsapp}),u(!0)}}catch(e){console.error("Error fetching business card:",e)}})()},[]);let b=e=>{let{name:l,value:t,type:s,checked:a}=e.target;n(e=>({...e,[l]:"checkbox"===s?a:t}))},x=e=>{let{name:l,files:t}=e.target;"background_image"===l?c(t[0]):"business_icon"===l&&i(t[0])},h=async e=>{e.preventDefault();let s=localStorage.getItem("token"),a=new FormData;Object.keys(t).forEach(e=>{a.append(e,t[e])}),r&&a.append("background_image",r),d&&a.append("business_icon",d);try{let e=m?"http://45.149.77.102:8000/card/businesscards/".concat(t.id,"/"):"http://45.149.77.102:8000/card/businesscards/";await o.Z[m?"patch":"post"](e,a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Token ".concat(s)}}),l()}catch(e){console.error("Error creating/updating business card:",e.response.data)}};return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,s.jsx)("div",{className:"w-[600px] bg-white p-6 rounded-lg shadow-lg ",children:(0,s.jsxs)("div",{className:"flex flex-col h-[80vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-full flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-black mb-0",children:m?"ویرایش کارت":"ساخت کارت"}),(0,s.jsx)("button",{className:"w-5",type:"button",onClick:l,children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",children:(0,s.jsx)("path",{fill:"#787878",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})})})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto p-2",children:(0,s.jsxs)("form",{onSubmit:h,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-base font-medium text-black mb-1",children:"عنوان"}),(0,s.jsx)("input",{type:"text",name:"name",value:t.name,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-base font-medium text-black mb-1",children:"زیر عنوان"}),(0,s.jsx)("textarea",{name:"description",value:t.description,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none max-h-16"})]}),(0,s.jsxs)("div",{className:"w-full mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"رنگ پس زمینه"}),(0,s.jsx)("div",{className:"w-full flex justify-around items-center",children:["#000000","#C6C6C6","#C70039"].map(e=>(0,s.jsxs)("label",{className:"flex flex-col-reverse justify-center items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"background_color",value:e,checked:t.background_color===e,onChange:b,className:"form-radio"}),(0,s.jsx)("span",{className:"rounded-lg",style:{backgroundColor:e,width:"100px",height:"40px",display:"inline-block"}})]},e))})]}),(0,s.jsxs)("div",{className:"w-full mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black",children:"رنگ متن"}),(0,s.jsx)("div",{className:"w-full flex justify-around items-center",children:["#FFFFFF","#000000","#FF5733"].map(e=>(0,s.jsxs)("label",{className:"flex flex-col-reverse justify-center items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"text_color",value:e,checked:t.text_color===e,onChange:b,className:"form-radio"}),(0,s.jsx)("span",{className:"rounded-lg",style:{backgroundColor:e,width:"100px",height:"40px",display:"inline-block"}})]},e))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black",children:"حاشیه بردار "}),(0,s.jsx)("input",{type:"checkbox",name:"border_radius",checked:t.border_radius,onChange:b,className:"text-red-950"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"لینک تلگرام"}),(0,s.jsx)("input",{type:"text",name:"telegram_link",placeholder:"مثال: https://t.me/username",value:t.telegram_link,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"اینستاگرام"}),(0,s.jsx)("input",{type:"text",name:"instagram",placeholder:"مثال: username",value:t.instagram,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"شماره تلفن"}),(0,s.jsx)("input",{type:"text",name:"phone_number",placeholder:"شماره تلفن را وارد کنید",value:t.phone_number,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"شماره تلفن 2"}),(0,s.jsx)("input",{type:"text",name:"phone_number_2",placeholder:"شماره تلفن دوم را وارد کنید",value:t.phone_number_2,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"بلاک سفارشی"}),(0,s.jsx)("input",{type:"text",name:"custom_block",placeholder:"محتوای سفارشی را وارد کنید",value:t.custom_block,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"بلاک سفارشی 2"}),(0,s.jsx)("input",{type:"text",name:"custom_block_2",placeholder:"محتوای سفارشی دوم را وارد کنید",value:t.custom_block_2,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"لینک سفارشی"}),(0,s.jsx)("input",{type:"text",name:"custom_url",placeholder:"لینک سفارشی را وارد کنید",value:t.custom_url,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"رنگ دکمه"}),(0,s.jsx)("input",{type:"color",name:"button_color",value:t.button_color,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"وب سایت"}),(0,s.jsx)("input",{type:"text",name:"website",placeholder:"آدرس وب سایت را وارد کنید",value:t.website,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"واتساپ"}),(0,s.jsx)("input",{type:"text",name:"whatsapp",placeholder:"شماره واتساپ را وارد کنید",value:t.whatsapp,onChange:b,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"تصویر پس زمینه"}),(0,s.jsx)("input",{type:"file",name:"background_image",onChange:x,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-1",children:"آیکون کسب و کار"}),(0,s.jsx)("input",{type:"file",name:"business_icon",onChange:x,className:"w-full p-2 border border-gray-300 rounded-lg text-red-950 focus:outline-none"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-700 focus:outline-none",children:m?"ویرایش کارت":"ساخت کارت"})]})})]})})})},d=t(8970),i=t(7171),m=()=>{let[e,l]=(0,a.useState)(!1),[t,n]=(0,a.useState)(!1),[o,m]=(0,a.useState)(""),u=()=>{l(!0)};return(0,s.jsxs)(r,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-center h-full w-full md:flex-row flex-col",children:[(0,s.jsx)(d.default,{onCardStatusChange:function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(e),l&&m(l.custom_url)}}),!t&&(0,s.jsx)("button",{onClick:()=>u(),className:"fixed w-[80px] h-[80px] bg-blue-400 flex justify-center items-center   right-16 bottom-8 rounded-full   hover:bg-blue-500",children:(0,s.jsx)("svg",{className:"w-10",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:(0,s.jsx)("path",{fill:"#ffffff",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"})})}),t&&(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},children:[(0,s.jsx)("button",{onClick:()=>u(),className:"min-w-[70px] min-h-[70px] bg-white border border-gray-300 text-blue-500 rounded-lg flex items-center justify-center hover:bg-gray-100 transition-transform transform hover:scale-110",children:(0,s.jsx)("span",{className:"text-xl",children:"ویرایش"})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(i.ZP,{value:"https://linkcarrd.ir/".concat(o)})})]})]}),e&&(0,s.jsx)(c,{onClose:()=>{l(!1)}})]})}},8060:function(e){e.exports={dropDown_dashboard:"Layout_dropDown_dashboard__A9BW5",dropdown:"Layout_dropdown__FwqTi"}}},function(e){e.O(0,[780,236,171,970,971,23,744],function(){return e(e.s=4446)}),_N_E=e.O()}]);